{"version":3,"sources":["../../../src/nodes/octiconLink.ts","../../src/index.tsx","../../../src/nodes/copy.ts","../../node_modules/@uiw/react-markdown-preview/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../../node_modules/@uiw/react-markdown-preview/node_modules/@babel/runtime/helpers/extends.js"],"names":["octiconLink","type","tagName","properties","className","viewBox","version","width","height","ariaHidden","children","fillRule","d","rehypeRewriteHandle","node","parent","test","child","class","code","getCodeStr","str","onClick","target","copyTextToClipboard","setTimeout","fill","data","Array","prefixCls","warpperElement","mdp","React","useImperativeHandle","ref","cls","onScroll","onMouseOver","style","rehypePlugins","ignoreMissing","rewrite","other","remarkPlugins","source","module","exports","excluded","key","i","sourceKeys","Object","keys","length","indexOf","__esModule","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","this"],"mappings":"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","file":"static/js/vendors-markdown-preview.7e2bd184.chunk.js","sourcesContent":["import { Element } from 'hast';\n\nexport const octiconLink: Element = {\n  type: 'element',\n  tagName: 'svg',\n  properties: {\n    className: 'octicon octicon-link',\n    viewBox: '0 0 16 16',\n    version: '1.1',\n    width: '16',\n    height: '16',\n    ariaHidden: 'true',\n  },\n  children: [\n    {\n      type: 'element',\n      tagName: 'path',\n      children: [],\n      properties: {\n        fillRule: 'evenodd',\n        d: 'M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z',\n      },\n    },\n  ],\n};\n","import React, { useImperativeHandle } from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport { Root, Element, ElementContent } from 'hast';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeAttrs from 'rehype-attr';\n// @ts-ignore\nimport rehypePrism from '@mapbox/rehype-prism';\nimport rehypeRewrite from 'rehype-rewrite';\nimport { octiconLink } from './nodes/octiconLink';\nimport { copyElement } from './nodes/copy';\nimport './styles/markdown.less';\nimport './styles/markdowncolor.less';\n\nconst rehypeRewriteHandle = (node: ElementContent, index: number | null, parent: Root | Element | null) => {\n  if (node.type === 'element' && parent && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName)) {\n    const child = node.children && (node.children[0] as Element);\n    if (child && child.properties && child.properties.ariaHidden === 'true') {\n      child.properties = { class: 'anchor', ...child.properties };\n      child.children = [octiconLink];\n    }\n  }\n  if (node.type === 'element' && node.tagName === 'pre') {\n    const code = getCodeStr(node.children);\n    node.children.push(copyElement(code));\n  }\n};\n\nconst getCodeStr = (data: ElementContent[] = [], code: string = '') => {\n  data.forEach((node) => {\n    if (node.type === 'text') {\n      code += node.value;\n    } else if (node.type === 'element' && node.children && Array.isArray(node.children)) {\n      code += getCodeStr(node.children);\n    }\n  });\n  return code;\n};\n\nexport interface MarkdownPreviewProps extends Omit<Options, 'children'> {\n  prefixCls?: string;\n  className?: string;\n  source?: string;\n  style?: React.CSSProperties;\n  warpperElement?: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  onMouseOver?: (e: React.MouseEvent<HTMLDivElement>) => void;\n}\n\nexport interface MarkdownPreviewRef extends MarkdownPreviewProps {\n  mdp: React.RefObject<HTMLDivElement>;\n}\n\nexport default React.forwardRef<MarkdownPreviewRef, MarkdownPreviewProps>((props, ref) => {\n  const {\n    prefixCls = 'wmde-markdown wmde-markdown-color',\n    className,\n    source,\n    style,\n    onScroll,\n    onMouseOver,\n    warpperElement = {},\n    ...other\n  } = props;\n  const mdp = React.createRef<HTMLDivElement>();\n  useImperativeHandle(ref, () => ({ ...props, mdp }), [mdp, props]);\n  const cls = `${prefixCls || ''} ${className || ''}`;\n  return (\n    <div ref={mdp} onScroll={onScroll} onMouseOver={onMouseOver} {...warpperElement} className={cls} style={style}>\n      <ReactMarkdown\n        {...other}\n        rehypePlugins={[\n          [rehypePrism, { ignoreMissing: true }],\n          rehypeRaw,\n          slug,\n          headings,\n          [rehypeRewrite, { rewrite: rehypeRewriteHandle }],\n          [rehypeAttrs, { properties: 'attr' }],\n          ...(other.rehypePlugins || []),\n        ]}\n        remarkPlugins={[...(other.remarkPlugins || []), gfm]}\n        children={source || ''}\n      />\n    </div>\n  );\n});\n","import { Element } from 'hast';\nimport copyTextToClipboard from '@uiw/copy-to-clipboard';\n\nexport function copyElement(str: string = 'test'): Element {\n  return {\n    type: 'element',\n    tagName: 'div',\n    properties: {\n      // @ts-ignore\n      onClick: ({ target }) => {\n        target.classList.add('active');\n        copyTextToClipboard(target.dataset.code as string, function () {\n          setTimeout(() => {\n            target.classList.remove('active');\n          }, 2000);\n        });\n      },\n      'data-code': str,\n      class: 'copied',\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'svg',\n        properties: {\n          className: 'octicon-copy',\n          ariaHidden: 'true',\n          viewBox: '0 0 16 16',\n          fill: 'currentColor',\n          height: 12,\n          width: 12,\n        },\n        children: [\n          {\n            type: 'element',\n            tagName: 'path',\n            properties: {\n              fillRule: 'evenodd',\n              d: 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z',\n            },\n            children: [],\n          },\n          {\n            type: 'element',\n            tagName: 'path',\n            properties: {\n              fillRule: 'evenodd',\n              d: 'M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z',\n            },\n            children: [],\n          },\n        ],\n      },\n      {\n        type: 'element',\n        tagName: 'svg',\n        properties: {\n          className: 'octicon-check',\n          ariaHidden: 'true',\n          viewBox: '0 0 16 16',\n          fill: 'currentColor',\n          height: 12,\n          width: 12,\n        },\n        children: [\n          {\n            type: 'element',\n            tagName: 'path',\n            properties: {\n              fillRule: 'evenodd',\n              d: 'M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z',\n            },\n            children: [],\n          },\n        ],\n      },\n    ],\n  };\n}\n","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;"],"sourceRoot":""}